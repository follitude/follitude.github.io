{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"themes/materialize/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/materialize/source/images/close.png","path":"images/close.png","modified":1,"renderable":1},{"_id":"themes/materialize/source/images/loading.gif","path":"images/loading.gif","modified":1,"renderable":1},{"_id":"themes/materialize/source/images/next.png","path":"images/next.png","modified":1,"renderable":1},{"_id":"themes/materialize/source/images/prev.png","path":"images/prev.png","modified":1,"renderable":1},{"_id":"themes/materialize/source/js/app.js","path":"js/app.js","modified":1,"renderable":1},{"_id":"themes/materialize/source/js/build.txt","path":"js/build.txt","modified":1,"renderable":1},{"_id":"themes/materialize/source/js/lightbox-on-articles.js","path":"js/lightbox-on-articles.js","modified":1,"renderable":1},{"_id":"themes/materialize/source/js/loadCss.js","path":"js/loadCss.js","modified":1,"renderable":1},{"_id":"themes/materialize/source/js/share-post.js","path":"js/share-post.js","modified":1,"renderable":1},{"_id":"themes/materialize/source/fonts/fontawesome-webfont.woff","path":"fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/materialize/source/fonts/fontawesome-webfont.woff2","path":"fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/materialize/source/css/vendors.css","path":"css/vendors.css","modified":1,"renderable":1},{"_id":"themes/materialize/source/fonts/FontAwesome.otf","path":"fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/materialize/source/fonts/fontawesome-webfont.eot","path":"fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/materialize/source/fonts/fontawesome-webfont.ttf","path":"fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/materialize/source/js/vendors.js","path":"js/vendors.js","modified":1,"renderable":1},{"_id":"themes/materialize/source/fonts/fontawesome-webfont.svg","path":"fonts/fontawesome-webfont.svg","modified":1,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"2debe1a9ad8f6349ee600c17dec5ca70383c7f9a","modified":1513220781000},{"_id":"source/index.html","hash":"54d46b6ccc3a284f4940b1833cc5885e8de78026","modified":1513220781000},{"_id":"themes/materialize/.editorconfig","hash":"db4ad0a4c03f9eed00e9e18e016c512fb84a8548","modified":1513222554000},{"_id":"themes/materialize/.git","hash":"707ee71a0d852757e129112cb6ba10e058ef91e6","modified":1513222554000},{"_id":"themes/materialize/.gitignore","hash":"0746309d8b143cc8a67c462e848c87786ae682e8","modified":1513222554000},{"_id":"themes/materialize/Gruntfile.js","hash":"8302d6a63c73a245e881ee7c3285a55416feeabb","modified":1513222554000},{"_id":"themes/materialize/LICENSE","hash":"031543c3ea85c553a3ef71fbe2e01ed11ab9546f","modified":1513222554000},{"_id":"themes/materialize/README.md","hash":"441453cbf1af7a2ca776da4159382c0b4c5b2efe","modified":1513222554000},{"_id":"themes/materialize/_config.yml","hash":"735e0c05d28d4c06777f59e22cc17a162b2c4060","modified":1513222554000},{"_id":"themes/materialize/materialize.iml","hash":"913909afe723a8eb9340ac95e887e7aeb94cbadc","modified":1513222554000},{"_id":"themes/materialize/package.json","hash":"410b0c9ace2403108c80332e542e78c21d7e980b","modified":1513222554000},{"_id":"themes/materialize/package-lock.json","hash":"42f610997c956e1be58c4c04d9c7df11740af32b","modified":1513222554000},{"_id":"source/_posts/Replace-HDFS-with-CephFS-in-Hadoop.md","hash":"ca78e40075b92d1e303d05e067f1cd30cbb5983d","modified":1513221343000},{"_id":"source/_posts/Use-RDMA-Emulation-in-Software-Using-SoftiWARP.md","hash":"fbe537c24ed471ce9e832a1fd7be7ad128c4ea9e","modified":1513221352000},{"_id":"source/_posts/hello-world.md","hash":"8a02477044e2b77f1b262da2c48c01429e4a32e4","modified":1513220781000},{"_id":"themes/materialize/.idea/materialize.iml","hash":"980957b57c4f1eae5e85d664d8375f83d47d3e5a","modified":1513222554000},{"_id":"themes/materialize/.idea/modules.xml","hash":"ec2f37f6d698fded09eaa7d488852b32e34208fd","modified":1513222554000},{"_id":"themes/materialize/.idea/vcs.xml","hash":"6f94fc1df9e8721673d47588ac444667dc9ded06","modified":1513222554000},{"_id":"themes/materialize/languages/default.yml","hash":"feb1dd022dc8897d65baa5b927de2a3d4178d798","modified":1513222554000},{"_id":"themes/materialize/layout/archive.ejs","hash":"ec498c6c0606acde997ce195dad97b267418d980","modified":1513222554000},{"_id":"themes/materialize/layout/blank.ejs","hash":"a0f69855d25b5469d5a5bef4e4eb4b53d5954637","modified":1513222554000},{"_id":"themes/materialize/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1513222554000},{"_id":"themes/materialize/layout/index.ejs","hash":"821e7ac309a0522e8d83770d914896bea85747ed","modified":1513222554000},{"_id":"themes/materialize/layout/layout.ejs","hash":"e2e2b6bb814de0da9e9e1d22df3f576b13de0fd1","modified":1513222554000},{"_id":"themes/materialize/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1513222554000},{"_id":"themes/materialize/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1513222554000},{"_id":"themes/materialize/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1513222554000},{"_id":"themes/materialize/.idea/inspectionProfiles/Project_Default.xml","hash":"eced7cb2ced813116ee9d0cf49b9e57644906b79","modified":1513222554000},{"_id":"themes/materialize/layout/_customad/adsense.ejs","hash":"0183c014d4c044e3926adc2730567d0afcd6982e","modified":1513222554000},{"_id":"themes/materialize/layout/_partial/archive-post.ejs","hash":"7dd22669aef21131c8bcbc02b1ecee0d0981d313","modified":1513222554000},{"_id":"themes/materialize/layout/_partial/archive.ejs","hash":"6ede948017698a70de63139ea1e96c3870ce42c1","modified":1513222554000},{"_id":"themes/materialize/layout/_partial/article.ejs","hash":"ad10c4cc90b0827561ea50f04f4ea43246453132","modified":1513222554000},{"_id":"themes/materialize/layout/_partial/google-analytics.ejs","hash":"3d813ec79148d35d96197e8e0a594a2ee53142c3","modified":1513222554000},{"_id":"themes/materialize/layout/_partial/header.ejs","hash":"f2bbc988eb9ba3ae03ea550b714e98110bcb75ce","modified":1513222554000},{"_id":"themes/materialize/layout/_partial/mobile-nav.ejs","hash":"347cf1befd2ea637c24bd5901929d8e36e359e75","modified":1513222554000},{"_id":"themes/materialize/layout/_partial/sidebar.ejs","hash":"c70869569749a8f48cce202fa57926c06b55fdab","modified":1513222554000},{"_id":"themes/materialize/layout/_widget/archive.ejs","hash":"c29c3e2c070eab83e1193daeaf820c5c924f5ad2","modified":1513222554000},{"_id":"themes/materialize/layout/_widget/category.ejs","hash":"0e9de1c22dccbba747ec4726dfa4bf61bb103691","modified":1513222554000},{"_id":"themes/materialize/layout/_widget/recent_posts.ejs","hash":"d6591c745402fbc600e682830a343f732e336e4f","modified":1513222554000},{"_id":"themes/materialize/layout/_widget/tag.ejs","hash":"0f7f9b63c4b034ad556fec6b90375a63ad19f1f3","modified":1513222554000},{"_id":"themes/materialize/layout/_widget/tagcloud.ejs","hash":"9028129dd2e56813197d0c38db5df8110aaeaabb","modified":1513222554000},{"_id":"themes/materialize/source/_js-source/app.js","hash":"6f868013afbbd8d766ec10bc8e4729727f44bebd","modified":1513222554000},{"_id":"themes/materialize/source/_js-source/lightbox-on-articles.js","hash":"cc040c2a57c3abaa0253f989c119e133e85104bb","modified":1513222554000},{"_id":"themes/materialize/source/_js-source/loadCss.js","hash":"6963322ed8ba91629930b77f99e38da599f71019","modified":1513222554000},{"_id":"themes/materialize/source/_js-source/share-post.js","hash":"a6a9563decf4b7387f439a21817daa8cb0eb8c55","modified":1513222554000},{"_id":"themes/materialize/source/css/_variables.styl","hash":"7959377e6c4e1dba6e3def25a4bd8a1c70bfa19d","modified":1513222554000},{"_id":"themes/materialize/source/css/style.styl","hash":"84a52525e1a9243a79f424479692fd8362fd37f8","modified":1513222554000},{"_id":"themes/materialize/source/images/close.png","hash":"3ca48361cfe0e41163023d03c26296f375bb3eac","modified":1513222554000},{"_id":"themes/materialize/source/images/_hexo-theme-materialize.jpg","hash":"a15ed49c2623601221588ed50e3fc4bbaa7ad880","modified":1513222554000},{"_id":"themes/materialize/source/images/loading.gif","hash":"cf720b50cf8dde0e1a84ce1c6a77788bfc5882d5","modified":1513222554000},{"_id":"themes/materialize/source/images/next.png","hash":"777e92c050f600b4519299c3d786b8f2f459fea4","modified":1513222554000},{"_id":"themes/materialize/source/images/prev.png","hash":"6640a3432f7ba7aea6129cdf7a5d3eabd47c295c","modified":1513222554000},{"_id":"themes/materialize/source/js/app.js","hash":"5b2fabc980e99b2b4e90b8ccffab0c82005e5a33","modified":1513222554000},{"_id":"themes/materialize/source/js/build.txt","hash":"633778edd9b6cb87e7ee6393409957bf638a000e","modified":1513222554000},{"_id":"themes/materialize/source/js/lightbox-on-articles.js","hash":"dbcee0e1f8fbca1fb2a0ecec82e969da83a0413a","modified":1513222554000},{"_id":"themes/materialize/source/js/loadCss.js","hash":"ca6030574ad6d36f4c35ac0ffa1ced2d260cf38d","modified":1513222554000},{"_id":"themes/materialize/source/js/share-post.js","hash":"6031c27d0156edd1863d6cb1edb59c3e89535e5f","modified":1513222554000},{"_id":"themes/materialize/source/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1513222554000},{"_id":"themes/materialize/source/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1513222554000},{"_id":"themes/materialize/layout/_partial/post/category.ejs","hash":"16128d2422645e18d1b6882d4c4df17d895bd76e","modified":1513222554000},{"_id":"themes/materialize/layout/_partial/post/gallery.ejs","hash":"b0bf3f5d923c261ca2b5fabab513f1ec2708c8ca","modified":1513222554000},{"_id":"themes/materialize/layout/_partial/post/nav.ejs","hash":"44ae7696be6d0cfcb5c3f3aba567aab46fb0025d","modified":1513222554000},{"_id":"themes/materialize/layout/_partial/post/tag.ejs","hash":"694b5101bcc44c9f9c1cc62e5ad2fdfb4b7c7a07","modified":1513222554000},{"_id":"themes/materialize/layout/_partial/post/title.ejs","hash":"4cee17c392cf647d65185272ed676ca477c53a5b","modified":1513222554000},{"_id":"themes/materialize/source/css/_partial/article.styl","hash":"83052d4add301be1dd8d84d1a417767d08e05b79","modified":1513222554000},{"_id":"themes/materialize/source/css/_partial/header.styl","hash":"eb88b084642621abbfcd3f0ef4a3089ad6375d19","modified":1513222554000},{"_id":"themes/materialize/source/css/_partial/highlight.styl","hash":"49763e5f7a7077b82925331d304f90d0b459e68b","modified":1513222554000},{"_id":"themes/materialize/source/css/_partial/index.styl","hash":"b86d062d2c374b76c7c95d2f2a876a137083fe69","modified":1513222554000},{"_id":"themes/materialize/source/css/_util/mixin.styl","hash":"429bad87fc156eacf226c5e35b0eafc277f2504b","modified":1513222554000},{"_id":"themes/materialize/source/css/vendors.css","hash":"467d0c9771160cb69b0cca8c654453ffa1b3198b","modified":1513222554000},{"_id":"themes/materialize/source/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1513222554000},{"_id":"themes/materialize/source/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1513222554000},{"_id":"themes/materialize/source/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1513222554000},{"_id":"themes/materialize/source/js/vendors.js","hash":"4f624a853dd1df3d846ed7d5c266248f5e1aa457","modified":1513222554000},{"_id":"themes/materialize/source/fonts/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1513222554000},{"_id":"public/post-sitemap.xml","hash":"01325c7eca39f9a72e80006f2e21eca641814218","modified":1513223039179},{"_id":"public/page-sitemap.xml","hash":"29a8ef192de310d6254396ae3b7f35e25cc7f050","modified":1513223039235},{"_id":"public/sitemap.xsl","hash":"4321fa69dc1b8811d32b7a1478e5603e038cea1a","modified":1513223039237},{"_id":"public/sitemap.xml","hash":"50a7bc2deec4258ae317fa82b7d7472c63307ce8","modified":1513223039237},{"_id":"public/index.html","hash":"046a9e36808cb047e4f59f436f195a8ed66d2141","modified":1513223039245},{"_id":"public/blog/hello-world/index.html","hash":"9fbc16451745d8bffb2379bf5510fb8138f5f174","modified":1513223039245},{"_id":"public/blog/Use-RDMA-Emulation-in-Software-Using-SoftiWARP/index.html","hash":"0b8ea86da3c947512be8738e38d6ec040a074f86","modified":1513223039245},{"_id":"public/blog/Replace-HDFS-with-CephFS-in-Hadoop/index.html","hash":"6c6b8f7fe90601b98d232a6e23a8c8519fd75aa9","modified":1513223039245},{"_id":"public/blog/index.html","hash":"8b0942c5d58ad8bb393234e9df3af679589ab938","modified":1513223039245},{"_id":"public/blog/2017/index.html","hash":"f3527240f8aac5d4b182d2e18204a7a042adfe2f","modified":1513223039245},{"_id":"public/blog/2017/12/index.html","hash":"4969e305a9c634aa68ab36c59df9c90af741cc38","modified":1513223039245},{"_id":"public/CNAME","hash":"2debe1a9ad8f6349ee600c17dec5ca70383c7f9a","modified":1513223039249},{"_id":"public/images/close.png","hash":"3ca48361cfe0e41163023d03c26296f375bb3eac","modified":1513223039249},{"_id":"public/images/loading.gif","hash":"cf720b50cf8dde0e1a84ce1c6a77788bfc5882d5","modified":1513223039249},{"_id":"public/images/next.png","hash":"777e92c050f600b4519299c3d786b8f2f459fea4","modified":1513223039249},{"_id":"public/images/prev.png","hash":"6640a3432f7ba7aea6129cdf7a5d3eabd47c295c","modified":1513223039249},{"_id":"public/js/build.txt","hash":"633778edd9b6cb87e7ee6393409957bf638a000e","modified":1513223039249},{"_id":"public/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1513223039650},{"_id":"public/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1513223039651},{"_id":"public/css/style.css","hash":"9420f2f90f457f964fd05092d278487341a4d584","modified":1513223039658},{"_id":"public/js/app.js","hash":"5b2fabc980e99b2b4e90b8ccffab0c82005e5a33","modified":1513223039659},{"_id":"public/js/lightbox-on-articles.js","hash":"dbcee0e1f8fbca1fb2a0ecec82e969da83a0413a","modified":1513223039659},{"_id":"public/js/share-post.js","hash":"6031c27d0156edd1863d6cb1edb59c3e89535e5f","modified":1513223039659},{"_id":"public/js/loadCss.js","hash":"ca6030574ad6d36f4c35ac0ffa1ced2d260cf38d","modified":1513223039659},{"_id":"public/css/vendors.css","hash":"04879d0278bafee6d06f2289a40c615ad36b66ff","modified":1513223039659},{"_id":"public/js/vendors.js","hash":"25bca2ce4e648782aec6f3b15d326f8773d0150a","modified":1513223039659},{"_id":"public/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1513223039659},{"_id":"public/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1513223039660},{"_id":"public/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1513223039660},{"_id":"public/fonts/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1513223039666}],"Category":[],"Data":[],"Page":[{"layout":"index","title":"","comments":0,"_content":"\n\n<div class=\"container\">\n\n  <div class=\"row\">\n    <div class=\"col s12 center-align\">\n      <h4 class=\"card-title color-featured\">\n        Hey, my name is Ryan\n      </h4>\n      <h5>\n        I'm agnostic about violence\n      </h5>\n\n      <p>\n        You know why people like violence? It's because it feels good. Sometimes we can't do what feels good. We have to do what is logical.\n      </p>\n\n    </div>\n  </div>\n\n</div>\n","source":"index.html","raw":"---\nlayout: index\ntitle:\ncomments: false\n---\n\n\n<div class=\"container\">\n\n  <div class=\"row\">\n    <div class=\"col s12 center-align\">\n      <h4 class=\"card-title color-featured\">\n        Hey, my name is Ryan\n      </h4>\n      <h5>\n        I'm agnostic about violence\n      </h5>\n\n      <p>\n        You know why people like violence? It's because it feels good. Sometimes we can't do what feels good. We have to do what is logical.\n      </p>\n\n    </div>\n  </div>\n\n</div>\n","date":"2017-12-14T03:06:21.000Z","updated":"2017-12-14T03:06:21.000Z","path":"index.html","_id":"cjb5xxdg00000her9ehk45v5d","content":"\n\n<div class=\"container\">\n\n  <div class=\"row\">\n    <div class=\"col s12 center-align\">\n      <h4 class=\"card-title color-featured\">\n        Hey, my name is Ryan\n      </h4>\n      <h5>\n        I'm agnostic about violence\n      </h5>\n\n      <p>\n        You know why people like violence? It's because it feels good. Sometimes we can't do what feels good. We have to do what is logical.\n      </p>\n\n    </div>\n  </div>\n\n</div>\n","site":{"data":{}},"excerpt":"","more":"\n\n<div class=\"container\">\n\n  <div class=\"row\">\n    <div class=\"col s12 center-align\">\n      <h4 class=\"card-title color-featured\">\n        Hey, my name is Ryan\n      </h4>\n      <h5>\n        I'm agnostic about violence\n      </h5>\n\n      <p>\n        You know why people like violence? It's because it feels good. Sometimes we can't do what feels good. We have to do what is logical.\n      </p>\n\n    </div>\n  </div>\n\n</div>\n"}],"Post":[{"title":"Replace HDFS with CephFS in Hadoop (Stand-alone)","_content":"##### 环境\n```\nlsb_release -d\nUbuntu 16.04.2 LTS\n\njava -version\nopenjdk version \"1.8.0_131\"\n\nant -version\nAnt：Apache Ant(TM) version 1.9.6\n```\n\n##### 下载源码\n###### Hadoop\n```\ngit clone https://github.com/apache/hadoop.git\n```\n\n###### Ceph\n```\ngit clone https://github.com/ceph/ceph.git\n```\n\n##### 分支选择\n根据Ceph官网的描述，\"Currently requires Hadoop 1.1.X stable series\"，使用Hadoop的release-1.1.2分支，Ceph使用luminous分支\n\n##### 编译Hadoop\n```\ncd hpath  \ngit checkout release-1.1.2\n```\n修改src/mapred/org/apache/hadoop/mapreduce/lib/partition/InputSampler.java第319行\n```\nK[] samples = (K[])sampler.getSample(inf, job);\n```\n然后执行\n```  \nant compile  \n```\n`hpath: 替换为相应的hadoop目录的路径`\n\n##### 编译Ceph\n```\ncd cpath  \ngit checkout luminous  \n./run-make-check.sh\ncd build  \nmake vstart        \n../src/vstart.sh -d -n -x -l  \nbin/ceph -s  \n```\n`cpath: 替换为相应的ceph目录的路径`\n\n如果显示如下，则Ceph单机测试集群已经启动  \n```\ncluster:  \n  id:     34d6f7d7-3d0b-46c6-848d-69b0dfe33965  \n  health: HEALTH_OK\n\nservices:  \n  mon: 3 daemons, quorum a,b,c  \n  mgr: x(active)  \n  mds: cephfs_a-1/1/1 up  {0=c=up:active}, 2 up:standby  \n  osd: 3 osds: 3 up, 3 in\n```\n\n##### 创建Hadoop使用的pool\n```\nbin/ceph osd pool create hadoop 100  \nbin/ceph osd pool set hadoop size 1  \nbin/ceph mds add_data_pool hadoop\n```\n\n##### 挂载CephFS\n```\nmkdir cephfs\nsudo mount -t ceph host:port:/ /mnt/cephfs -o name=admin,secret=keyring  \n```\n`host: ceph mon的ip或者hostname,可以通过ceph mon stat查看`  \n`port: ceph mon的端口`  \n`keyring: 替换为ceph路径下build/keyring中[client.admin]的key`\n\n##### 安装依赖\n添加key\n```\nwget -q -O- 'https://download.ceph.com/keys/release.asc' | sudo apt-key add -\n```\n在/etc/apt/sources.list中加入  \n```\ndeb http://mirrors.aliyun.com/ceph/debian-luminous xenial main  \ndeb-src http://mirrors.aliyun.com/ceph/debian-luminous xenial main  \n```\n`根据具体的OS和ceph可替换相应的版本`  \n```\nsudo apt-get update  \nsudo apt-get install libcephfs-jni libcephfs-java  \nln -s /usr/lib/jni/libcephfs_jni.so hpath/lib/\n```\n\n下载Ceph官网提供的插件hadoop-cephfs.jar  \n```\ncp dpath/hadoop-cephfs.jar hpath/lib/  \n```\n`hpath: 替换为相应的hadoop目录的路径`  \n`dpath: 替换为相应的下载路径`\n\n##### 配置文件\n###### hadoop-env.sh\n在文件中加入  \n```\nJAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64    \n```\n`替换为相应的jdk路径`\n```\nexport HADOOP_CLASSPATH=/usr/share/java/libcephfs.jar\n```\n`通常在/usr/share/java路径下，可以通过locate定位包的位置`\n\n###### core.site.xml\n```xml\n<configuration>\n\n        <property>\n        <name>fs.default.name</name>\n        <value>ceph://host:port/</value>\n        </property>\n\n        <property>\n        <name>ceph.conf.file</name>\n        <value>cpath/build/ceph.conf</value>\n        </property>\n\n        <property>\n        <name>ceph.auth.id</name>\n        <value>admin</value>\n        </property>\n\n        <property>\n        <name>ceph.auth.keyring</name>\n        <value>cpath/build/keyring</value>\n        </property>\n\n        <property>\n        <name>ceph.data.pools</name>\n        <value>hadoop</value>\n        </property>\n\n        <property>\n        <name>fs.ceph.impl</name>\n        <value>org.apache.hadoop.fs.ceph.CephFileSystem</value>\n        </property>\n\n</configuration>\n```\n`host: ceph mon的ip或者hostname`  \n`port: ceph mon的端口`  \n`cpath: 替换为相应的ceph目录的路径`\n\n###### mapred-site.xml\n```xml\n<configuration>\n\n        <property>\n        <name>mapred.job.tracker</name>\n        <value>host:9001</value>\n        </property>\n\n</configuration>\n```\n`host: ceph mon的ip`\n\n###### masters\n```\n        host\n\n```\n###### slaves\n```\n        host\n```\n`masters和slaves中的host意义同上`\n\n##### 测试\n```\ncd hpath  \nbin/start-mapred.sh  \njps  \n```\n可以看到JobTracker和TaskTracker即启动成功\n\n##### 上传文件\n```\nbin/hadoop fs -put README.txt /\n```\n显示如下\n\n```\nLoading libcephfs-jni from default path:  \n/usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib  \nLoading libcephfs-jni: Success!  \n```\n可以看到上传过程中调用了libcephfs-jni\n\n```\nbin/hadoop fs -ls /\n```\n显示如下\n\n```  \nLoading libcephfs-jni from default path:  \n/usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib  \nLoading libcephfs-jni: Success!  \nFound 2 items  \ndrwxrwxrwx   - lab          4 2017-10-25 11:44 /tmp  \n-rwxrwxrwx   3 lab       1366 2017-10-25 11:44 /README.txt  \n```\n","source":"_posts/Replace-HDFS-with-CephFS-in-Hadoop.md","raw":"---\ntitle: Replace HDFS with CephFS in Hadoop (Stand-alone)\n---\n##### 环境\n```\nlsb_release -d\nUbuntu 16.04.2 LTS\n\njava -version\nopenjdk version \"1.8.0_131\"\n\nant -version\nAnt：Apache Ant(TM) version 1.9.6\n```\n\n##### 下载源码\n###### Hadoop\n```\ngit clone https://github.com/apache/hadoop.git\n```\n\n###### Ceph\n```\ngit clone https://github.com/ceph/ceph.git\n```\n\n##### 分支选择\n根据Ceph官网的描述，\"Currently requires Hadoop 1.1.X stable series\"，使用Hadoop的release-1.1.2分支，Ceph使用luminous分支\n\n##### 编译Hadoop\n```\ncd hpath  \ngit checkout release-1.1.2\n```\n修改src/mapred/org/apache/hadoop/mapreduce/lib/partition/InputSampler.java第319行\n```\nK[] samples = (K[])sampler.getSample(inf, job);\n```\n然后执行\n```  \nant compile  \n```\n`hpath: 替换为相应的hadoop目录的路径`\n\n##### 编译Ceph\n```\ncd cpath  \ngit checkout luminous  \n./run-make-check.sh\ncd build  \nmake vstart        \n../src/vstart.sh -d -n -x -l  \nbin/ceph -s  \n```\n`cpath: 替换为相应的ceph目录的路径`\n\n如果显示如下，则Ceph单机测试集群已经启动  \n```\ncluster:  \n  id:     34d6f7d7-3d0b-46c6-848d-69b0dfe33965  \n  health: HEALTH_OK\n\nservices:  \n  mon: 3 daemons, quorum a,b,c  \n  mgr: x(active)  \n  mds: cephfs_a-1/1/1 up  {0=c=up:active}, 2 up:standby  \n  osd: 3 osds: 3 up, 3 in\n```\n\n##### 创建Hadoop使用的pool\n```\nbin/ceph osd pool create hadoop 100  \nbin/ceph osd pool set hadoop size 1  \nbin/ceph mds add_data_pool hadoop\n```\n\n##### 挂载CephFS\n```\nmkdir cephfs\nsudo mount -t ceph host:port:/ /mnt/cephfs -o name=admin,secret=keyring  \n```\n`host: ceph mon的ip或者hostname,可以通过ceph mon stat查看`  \n`port: ceph mon的端口`  \n`keyring: 替换为ceph路径下build/keyring中[client.admin]的key`\n\n##### 安装依赖\n添加key\n```\nwget -q -O- 'https://download.ceph.com/keys/release.asc' | sudo apt-key add -\n```\n在/etc/apt/sources.list中加入  \n```\ndeb http://mirrors.aliyun.com/ceph/debian-luminous xenial main  \ndeb-src http://mirrors.aliyun.com/ceph/debian-luminous xenial main  \n```\n`根据具体的OS和ceph可替换相应的版本`  \n```\nsudo apt-get update  \nsudo apt-get install libcephfs-jni libcephfs-java  \nln -s /usr/lib/jni/libcephfs_jni.so hpath/lib/\n```\n\n下载Ceph官网提供的插件hadoop-cephfs.jar  \n```\ncp dpath/hadoop-cephfs.jar hpath/lib/  \n```\n`hpath: 替换为相应的hadoop目录的路径`  \n`dpath: 替换为相应的下载路径`\n\n##### 配置文件\n###### hadoop-env.sh\n在文件中加入  \n```\nJAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64    \n```\n`替换为相应的jdk路径`\n```\nexport HADOOP_CLASSPATH=/usr/share/java/libcephfs.jar\n```\n`通常在/usr/share/java路径下，可以通过locate定位包的位置`\n\n###### core.site.xml\n```xml\n<configuration>\n\n        <property>\n        <name>fs.default.name</name>\n        <value>ceph://host:port/</value>\n        </property>\n\n        <property>\n        <name>ceph.conf.file</name>\n        <value>cpath/build/ceph.conf</value>\n        </property>\n\n        <property>\n        <name>ceph.auth.id</name>\n        <value>admin</value>\n        </property>\n\n        <property>\n        <name>ceph.auth.keyring</name>\n        <value>cpath/build/keyring</value>\n        </property>\n\n        <property>\n        <name>ceph.data.pools</name>\n        <value>hadoop</value>\n        </property>\n\n        <property>\n        <name>fs.ceph.impl</name>\n        <value>org.apache.hadoop.fs.ceph.CephFileSystem</value>\n        </property>\n\n</configuration>\n```\n`host: ceph mon的ip或者hostname`  \n`port: ceph mon的端口`  \n`cpath: 替换为相应的ceph目录的路径`\n\n###### mapred-site.xml\n```xml\n<configuration>\n\n        <property>\n        <name>mapred.job.tracker</name>\n        <value>host:9001</value>\n        </property>\n\n</configuration>\n```\n`host: ceph mon的ip`\n\n###### masters\n```\n        host\n\n```\n###### slaves\n```\n        host\n```\n`masters和slaves中的host意义同上`\n\n##### 测试\n```\ncd hpath  \nbin/start-mapred.sh  \njps  \n```\n可以看到JobTracker和TaskTracker即启动成功\n\n##### 上传文件\n```\nbin/hadoop fs -put README.txt /\n```\n显示如下\n\n```\nLoading libcephfs-jni from default path:  \n/usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib  \nLoading libcephfs-jni: Success!  \n```\n可以看到上传过程中调用了libcephfs-jni\n\n```\nbin/hadoop fs -ls /\n```\n显示如下\n\n```  \nLoading libcephfs-jni from default path:  \n/usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib  \nLoading libcephfs-jni: Success!  \nFound 2 items  \ndrwxrwxrwx   - lab          4 2017-10-25 11:44 /tmp  \n-rwxrwxrwx   3 lab       1366 2017-10-25 11:44 /README.txt  \n```\n","slug":"Replace-HDFS-with-CephFS-in-Hadoop","published":1,"date":"2017-12-14T03:15:43.000Z","updated":"2017-12-14T03:15:43.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjb5xxdgo0001her9sdeefy1u","content":"<h5 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">lsb_release -d</div><div class=\"line\">Ubuntu 16.04.2 LTS</div><div class=\"line\"></div><div class=\"line\">java -version</div><div class=\"line\">openjdk version &quot;1.8.0_131&quot;</div><div class=\"line\"></div><div class=\"line\">ant -version</div><div class=\"line\">Ant：Apache Ant(TM) version 1.9.6</div></pre></td></tr></table></figure>\n<h5 id=\"下载源码\"><a href=\"#下载源码\" class=\"headerlink\" title=\"下载源码\"></a>下载源码</h5><h6 id=\"Hadoop\"><a href=\"#Hadoop\" class=\"headerlink\" title=\"Hadoop\"></a>Hadoop</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git clone https://github.com/apache/hadoop.git</div></pre></td></tr></table></figure>\n<h6 id=\"Ceph\"><a href=\"#Ceph\" class=\"headerlink\" title=\"Ceph\"></a>Ceph</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git clone https://github.com/ceph/ceph.git</div></pre></td></tr></table></figure>\n<h5 id=\"分支选择\"><a href=\"#分支选择\" class=\"headerlink\" title=\"分支选择\"></a>分支选择</h5><p>根据Ceph官网的描述，”Currently requires Hadoop 1.1.X stable series”，使用Hadoop的release-1.1.2分支，Ceph使用luminous分支</p>\n<h5 id=\"编译Hadoop\"><a href=\"#编译Hadoop\" class=\"headerlink\" title=\"编译Hadoop\"></a>编译Hadoop</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd hpath  </div><div class=\"line\">git checkout release-1.1.2</div></pre></td></tr></table></figure>\n<p>修改src/mapred/org/apache/hadoop/mapreduce/lib/partition/InputSampler.java第319行<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">K[] samples = (K[])sampler.getSample(inf, job);</div></pre></td></tr></table></figure></p>\n<p>然后执行<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ant compile</div></pre></td></tr></table></figure></p>\n<p><code>hpath: 替换为相应的hadoop目录的路径</code></p>\n<h5 id=\"编译Ceph\"><a href=\"#编译Ceph\" class=\"headerlink\" title=\"编译Ceph\"></a>编译Ceph</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd cpath  </div><div class=\"line\">git checkout luminous  </div><div class=\"line\">./run-make-check.sh</div><div class=\"line\">cd build  </div><div class=\"line\">make vstart        </div><div class=\"line\">../src/vstart.sh -d -n -x -l  </div><div class=\"line\">bin/ceph -s</div></pre></td></tr></table></figure>\n<p><code>cpath: 替换为相应的ceph目录的路径</code></p>\n<p>如果显示如下，则Ceph单机测试集群已经启动<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">cluster:  </div><div class=\"line\">  id:     34d6f7d7-3d0b-46c6-848d-69b0dfe33965  </div><div class=\"line\">  health: HEALTH_OK</div><div class=\"line\"></div><div class=\"line\">services:  </div><div class=\"line\">  mon: 3 daemons, quorum a,b,c  </div><div class=\"line\">  mgr: x(active)  </div><div class=\"line\">  mds: cephfs_a-1/1/1 up  &#123;0=c=up:active&#125;, 2 up:standby  </div><div class=\"line\">  osd: 3 osds: 3 up, 3 in</div></pre></td></tr></table></figure></p>\n<h5 id=\"创建Hadoop使用的pool\"><a href=\"#创建Hadoop使用的pool\" class=\"headerlink\" title=\"创建Hadoop使用的pool\"></a>创建Hadoop使用的pool</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">bin/ceph osd pool create hadoop 100  </div><div class=\"line\">bin/ceph osd pool set hadoop size 1  </div><div class=\"line\">bin/ceph mds add_data_pool hadoop</div></pre></td></tr></table></figure>\n<h5 id=\"挂载CephFS\"><a href=\"#挂载CephFS\" class=\"headerlink\" title=\"挂载CephFS\"></a>挂载CephFS</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir cephfs</div><div class=\"line\">sudo mount -t ceph host:port:/ /mnt/cephfs -o name=admin,secret=keyring</div></pre></td></tr></table></figure>\n<p><code>host: ceph mon的ip或者hostname,可以通过ceph mon stat查看</code><br><code>port: ceph mon的端口</code><br><code>keyring: 替换为ceph路径下build/keyring中[client.admin]的key</code></p>\n<h5 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h5><p>添加key<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget -q -O- &apos;https://download.ceph.com/keys/release.asc&apos; | sudo apt-key add -</div></pre></td></tr></table></figure></p>\n<p>在/etc/apt/sources.list中加入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">deb http://mirrors.aliyun.com/ceph/debian-luminous xenial main  </div><div class=\"line\">deb-src http://mirrors.aliyun.com/ceph/debian-luminous xenial main</div></pre></td></tr></table></figure></p>\n<p><code>根据具体的OS和ceph可替换相应的版本</code><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get update  </div><div class=\"line\">sudo apt-get install libcephfs-jni libcephfs-java  </div><div class=\"line\">ln -s /usr/lib/jni/libcephfs_jni.so hpath/lib/</div></pre></td></tr></table></figure></p>\n<p>下载Ceph官网提供的插件hadoop-cephfs.jar<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">cp dpath/hadoop-cephfs.jar hpath/lib/</div></pre></td></tr></table></figure></p>\n<p><code>hpath: 替换为相应的hadoop目录的路径</code><br><code>dpath: 替换为相应的下载路径</code></p>\n<h5 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h5><h6 id=\"hadoop-env-sh\"><a href=\"#hadoop-env-sh\" class=\"headerlink\" title=\"hadoop-env.sh\"></a>hadoop-env.sh</h6><p>在文件中加入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64</div></pre></td></tr></table></figure></p>\n<p><code>替换为相应的jdk路径</code><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">export HADOOP_CLASSPATH=/usr/share/java/libcephfs.jar</div></pre></td></tr></table></figure></p>\n<p><code>通常在/usr/share/java路径下，可以通过locate定位包的位置</code></p>\n<h6 id=\"core-site-xml\"><a href=\"#core-site-xml\" class=\"headerlink\" title=\"core.site.xml\"></a>core.site.xml</h6><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>fs.default.name<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>ceph://host:port/<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>ceph.conf.file<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>cpath/build/ceph.conf<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>ceph.auth.id<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>ceph.auth.keyring<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>cpath/build/keyring<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>ceph.data.pools<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>hadoop<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>fs.ceph.impl<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>org.apache.hadoop.fs.ceph.CephFileSystem<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><code>host: ceph mon的ip或者hostname</code><br><code>port: ceph mon的端口</code><br><code>cpath: 替换为相应的ceph目录的路径</code></p>\n<h6 id=\"mapred-site-xml\"><a href=\"#mapred-site-xml\" class=\"headerlink\" title=\"mapred-site.xml\"></a>mapred-site.xml</h6><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapred.job.tracker<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>host:9001<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><code>host: ceph mon的ip</code></p>\n<h6 id=\"masters\"><a href=\"#masters\" class=\"headerlink\" title=\"masters\"></a>masters</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">host</div></pre></td></tr></table></figure>\n<h6 id=\"slaves\"><a href=\"#slaves\" class=\"headerlink\" title=\"slaves\"></a>slaves</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">host</div></pre></td></tr></table></figure>\n<p><code>masters和slaves中的host意义同上</code></p>\n<h5 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd hpath  </div><div class=\"line\">bin/start-mapred.sh  </div><div class=\"line\">jps</div></pre></td></tr></table></figure>\n<p>可以看到JobTracker和TaskTracker即启动成功</p>\n<h5 id=\"上传文件\"><a href=\"#上传文件\" class=\"headerlink\" title=\"上传文件\"></a>上传文件</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">bin/hadoop fs -put README.txt /</div></pre></td></tr></table></figure>\n<p>显示如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Loading libcephfs-jni from default path:  </div><div class=\"line\">/usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib  </div><div class=\"line\">Loading libcephfs-jni: Success!</div></pre></td></tr></table></figure>\n<p>可以看到上传过程中调用了libcephfs-jni</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">bin/hadoop fs -ls /</div></pre></td></tr></table></figure>\n<p>显示如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Loading libcephfs-jni from default path:  </div><div class=\"line\">/usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib  </div><div class=\"line\">Loading libcephfs-jni: Success!  </div><div class=\"line\">Found 2 items  </div><div class=\"line\">drwxrwxrwx   - lab          4 2017-10-25 11:44 /tmp  </div><div class=\"line\">-rwxrwxrwx   3 lab       1366 2017-10-25 11:44 /README.txt</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h5 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">lsb_release -d</div><div class=\"line\">Ubuntu 16.04.2 LTS</div><div class=\"line\"></div><div class=\"line\">java -version</div><div class=\"line\">openjdk version &quot;1.8.0_131&quot;</div><div class=\"line\"></div><div class=\"line\">ant -version</div><div class=\"line\">Ant：Apache Ant(TM) version 1.9.6</div></pre></td></tr></table></figure>\n<h5 id=\"下载源码\"><a href=\"#下载源码\" class=\"headerlink\" title=\"下载源码\"></a>下载源码</h5><h6 id=\"Hadoop\"><a href=\"#Hadoop\" class=\"headerlink\" title=\"Hadoop\"></a>Hadoop</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git clone https://github.com/apache/hadoop.git</div></pre></td></tr></table></figure>\n<h6 id=\"Ceph\"><a href=\"#Ceph\" class=\"headerlink\" title=\"Ceph\"></a>Ceph</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git clone https://github.com/ceph/ceph.git</div></pre></td></tr></table></figure>\n<h5 id=\"分支选择\"><a href=\"#分支选择\" class=\"headerlink\" title=\"分支选择\"></a>分支选择</h5><p>根据Ceph官网的描述，”Currently requires Hadoop 1.1.X stable series”，使用Hadoop的release-1.1.2分支，Ceph使用luminous分支</p>\n<h5 id=\"编译Hadoop\"><a href=\"#编译Hadoop\" class=\"headerlink\" title=\"编译Hadoop\"></a>编译Hadoop</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd hpath  </div><div class=\"line\">git checkout release-1.1.2</div></pre></td></tr></table></figure>\n<p>修改src/mapred/org/apache/hadoop/mapreduce/lib/partition/InputSampler.java第319行<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">K[] samples = (K[])sampler.getSample(inf, job);</div></pre></td></tr></table></figure></p>\n<p>然后执行<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ant compile</div></pre></td></tr></table></figure></p>\n<p><code>hpath: 替换为相应的hadoop目录的路径</code></p>\n<h5 id=\"编译Ceph\"><a href=\"#编译Ceph\" class=\"headerlink\" title=\"编译Ceph\"></a>编译Ceph</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd cpath  </div><div class=\"line\">git checkout luminous  </div><div class=\"line\">./run-make-check.sh</div><div class=\"line\">cd build  </div><div class=\"line\">make vstart        </div><div class=\"line\">../src/vstart.sh -d -n -x -l  </div><div class=\"line\">bin/ceph -s</div></pre></td></tr></table></figure>\n<p><code>cpath: 替换为相应的ceph目录的路径</code></p>\n<p>如果显示如下，则Ceph单机测试集群已经启动<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">cluster:  </div><div class=\"line\">  id:     34d6f7d7-3d0b-46c6-848d-69b0dfe33965  </div><div class=\"line\">  health: HEALTH_OK</div><div class=\"line\"></div><div class=\"line\">services:  </div><div class=\"line\">  mon: 3 daemons, quorum a,b,c  </div><div class=\"line\">  mgr: x(active)  </div><div class=\"line\">  mds: cephfs_a-1/1/1 up  &#123;0=c=up:active&#125;, 2 up:standby  </div><div class=\"line\">  osd: 3 osds: 3 up, 3 in</div></pre></td></tr></table></figure></p>\n<h5 id=\"创建Hadoop使用的pool\"><a href=\"#创建Hadoop使用的pool\" class=\"headerlink\" title=\"创建Hadoop使用的pool\"></a>创建Hadoop使用的pool</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">bin/ceph osd pool create hadoop 100  </div><div class=\"line\">bin/ceph osd pool set hadoop size 1  </div><div class=\"line\">bin/ceph mds add_data_pool hadoop</div></pre></td></tr></table></figure>\n<h5 id=\"挂载CephFS\"><a href=\"#挂载CephFS\" class=\"headerlink\" title=\"挂载CephFS\"></a>挂载CephFS</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir cephfs</div><div class=\"line\">sudo mount -t ceph host:port:/ /mnt/cephfs -o name=admin,secret=keyring</div></pre></td></tr></table></figure>\n<p><code>host: ceph mon的ip或者hostname,可以通过ceph mon stat查看</code><br><code>port: ceph mon的端口</code><br><code>keyring: 替换为ceph路径下build/keyring中[client.admin]的key</code></p>\n<h5 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h5><p>添加key<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget -q -O- &apos;https://download.ceph.com/keys/release.asc&apos; | sudo apt-key add -</div></pre></td></tr></table></figure></p>\n<p>在/etc/apt/sources.list中加入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">deb http://mirrors.aliyun.com/ceph/debian-luminous xenial main  </div><div class=\"line\">deb-src http://mirrors.aliyun.com/ceph/debian-luminous xenial main</div></pre></td></tr></table></figure></p>\n<p><code>根据具体的OS和ceph可替换相应的版本</code><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get update  </div><div class=\"line\">sudo apt-get install libcephfs-jni libcephfs-java  </div><div class=\"line\">ln -s /usr/lib/jni/libcephfs_jni.so hpath/lib/</div></pre></td></tr></table></figure></p>\n<p>下载Ceph官网提供的插件hadoop-cephfs.jar<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">cp dpath/hadoop-cephfs.jar hpath/lib/</div></pre></td></tr></table></figure></p>\n<p><code>hpath: 替换为相应的hadoop目录的路径</code><br><code>dpath: 替换为相应的下载路径</code></p>\n<h5 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h5><h6 id=\"hadoop-env-sh\"><a href=\"#hadoop-env-sh\" class=\"headerlink\" title=\"hadoop-env.sh\"></a>hadoop-env.sh</h6><p>在文件中加入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64</div></pre></td></tr></table></figure></p>\n<p><code>替换为相应的jdk路径</code><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">export HADOOP_CLASSPATH=/usr/share/java/libcephfs.jar</div></pre></td></tr></table></figure></p>\n<p><code>通常在/usr/share/java路径下，可以通过locate定位包的位置</code></p>\n<h6 id=\"core-site-xml\"><a href=\"#core-site-xml\" class=\"headerlink\" title=\"core.site.xml\"></a>core.site.xml</h6><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>fs.default.name<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>ceph://host:port/<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>ceph.conf.file<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>cpath/build/ceph.conf<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>ceph.auth.id<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>ceph.auth.keyring<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>cpath/build/keyring<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>ceph.data.pools<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>hadoop<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>fs.ceph.impl<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>org.apache.hadoop.fs.ceph.CephFileSystem<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><code>host: ceph mon的ip或者hostname</code><br><code>port: ceph mon的端口</code><br><code>cpath: 替换为相应的ceph目录的路径</code></p>\n<h6 id=\"mapred-site-xml\"><a href=\"#mapred-site-xml\" class=\"headerlink\" title=\"mapred-site.xml\"></a>mapred-site.xml</h6><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapred.job.tracker<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>host:9001<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><code>host: ceph mon的ip</code></p>\n<h6 id=\"masters\"><a href=\"#masters\" class=\"headerlink\" title=\"masters\"></a>masters</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">host</div></pre></td></tr></table></figure>\n<h6 id=\"slaves\"><a href=\"#slaves\" class=\"headerlink\" title=\"slaves\"></a>slaves</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">host</div></pre></td></tr></table></figure>\n<p><code>masters和slaves中的host意义同上</code></p>\n<h5 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd hpath  </div><div class=\"line\">bin/start-mapred.sh  </div><div class=\"line\">jps</div></pre></td></tr></table></figure>\n<p>可以看到JobTracker和TaskTracker即启动成功</p>\n<h5 id=\"上传文件\"><a href=\"#上传文件\" class=\"headerlink\" title=\"上传文件\"></a>上传文件</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">bin/hadoop fs -put README.txt /</div></pre></td></tr></table></figure>\n<p>显示如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Loading libcephfs-jni from default path:  </div><div class=\"line\">/usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib  </div><div class=\"line\">Loading libcephfs-jni: Success!</div></pre></td></tr></table></figure>\n<p>可以看到上传过程中调用了libcephfs-jni</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">bin/hadoop fs -ls /</div></pre></td></tr></table></figure>\n<p>显示如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Loading libcephfs-jni from default path:  </div><div class=\"line\">/usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib  </div><div class=\"line\">Loading libcephfs-jni: Success!  </div><div class=\"line\">Found 2 items  </div><div class=\"line\">drwxrwxrwx   - lab          4 2017-10-25 11:44 /tmp  </div><div class=\"line\">-rwxrwxrwx   3 lab       1366 2017-10-25 11:44 /README.txt</div></pre></td></tr></table></figure>\n"},{"title":"Use RDMA Emulation in Software Using SoftiWARP","_content":"##### 环境\n```\nlsb_release -d\nUbuntu 16.04.2 LTS\nuname -sr\nLinux 4.8.13 \n```\n`适用于4.8.x版本内核`\n\n##### 安装依赖\n```\nsudo apt-get install libncurses5 libncurses5-dev libelf-dev binutils-dev  \nsudo apt-get install libibcm-dev libibcm1 \nsudo apt-get install libnl-3-dev  \nwget https://www.openfabrics.org/downloads/verbs/ libibverbs-1.2.1.tar.gz  \ntar zxvf libibverbs-1.2.1.tar.gz  \ncd libibverbs-1.2.1   \n./configure  \nmake\nsudo make install\n```\n\n##### 添加规则文件\n###### /etc/udev/rules.d/40-ib.rules  \n```\n####  /etc/udev/rules.d/40-ib.rules ####  \nKERNEL==\"umad*\", NAME=\"infiniband/%k\"\nKERNEL==\"issm*\", NAME=\"infiniband/%k\"\nKERNEL==\"ucm*\", NAME=\"infiniband/%k\", MODE=\"0666\"\nKERNEL==\"uverbs*\", NAME=\"infiniband/%k\", MODE=\"0666\"\nKERNEL==\"uat\", NAME=\"infiniband/%k\", MODE=\"0666\"\nKERNEL==\"ucma\", NAME=\"infiniband/%k\", MODE=\"0666\"\nKERNEL==\"rdma_cm\", NAME=\"infiniband/%k\", MODE=\"0666\"\n```\n\n##### 下载源码\n###### SoftiWARP\n```\ngit clone https://github.com/zrlio/softiwarp.git\n```\n\n##### 编译并安装用户库\n```\ncd softiwarp/userlib/  \n./autogen.sh  \n./configure \nmake \nsudo make install  \nln -s /usr/local/etc/libibverbs.d /etc/libibverbs.d\n```\n\n##### 编译内核模块  \n```\ncd softiwarp/kernel/  \nmake  \n```\n\n##### 载入内核模块\n```\nsudo modprobe rdma_cm  \nsudo modprobe ib_uverbs  \nsudo modprobe rdma_ucm  \nsudo mkdir /lib/modules/4.8.x/extra  \nsudo cp siw.ko /lib/modules/4.8.x/extra  \nsudo insmod /lib/modules/4.8.x/extra/siw.ko  \ndepmod  \ncp ./userlib/src/.libs/libsiw-rdmav2.so /lib/x86_64-linux-gnu/  \nsudo ldconfig  \nsudo modprobe siw\n```\n\n##### 查看模块\n```\nlsmod | grep rdma\n```\n显示如下\n\n```\nrdma_ucm               28672  0\nib_uverbs              65536  1 rdma_ucm\nrdma_cm                53248  1 rdma_ucm\niw_cm                  45056  1 rdma_cm\nib_cm                  45056  1 rdma_cm\nib_core               204800  6 ib_cm,rdma_cm,ib_uverbs,iw_cm,rdma_ucm,siw\nconfigfs               36864  2 rdma_cm\n```\n\n##### 查看RDMA设备相关信息\n###### userspace verbs模块\n```\nls /dev/infiniband/  \n```\n显示如下\n\n```\nrdma_cm  uverbs0  uverbs1  uverbs2\n```\n\n###### userspace可使用的RDMA设备\n```\nibv_devices  \n```\n显示如下\n\n```\n    device          \t   node GUID\n    ------          \t----------------\n    siw_enp0s25     \t3417eb9bf6d00000\n    siw_lo          \t7369775f6c6f0000\n    siw_docker0     \t024244a5225b0000\n```\n\n###### userspace可使用的RDMA设备的相关信息\n```\nibv_devinfo\n```\n显示如下\n\n```\nhca_id:\tsiw_enp0s25\n\ttransport:\t\t\tiWARP (1)\n\tfw_ver:\t\t\t\t0.0.0\n\tnode_guid:\t\t\t3417:eb9b:f6d0:0000\n\tsys_image_guid:\t\t\t3417:eb9b:f6d0:0000\n\tvendor_id:\t\t\t0x626d74\n\tvendor_part_id:\t\t\t0\n\thw_ver:\t\t\t\t0x0\n\tphys_port_cnt:\t\t\t1\n\t\tport:\t1\n\t\t\tstate:\t\t\tPORT_ACTIVE (4)\n\t\t\tmax_mtu:\t\t1024 (3)\n\t\t\tactive_mtu:\t\t1024 (3)\n\t\t\tsm_lid:\t\t\t0\n\t\t\tport_lid:\t\t0\n\t\t\tport_lmc:\t\t0x00\n\t\t\tlink_layer:\t\tEthernet\n\nhca_id:\tsiw_lo\n\ttransport:\t\t\tiWARP (1)\n\tfw_ver:\t\t\t\t0.0.0\n\tnode_guid:\t\t\t7369:775f:6c6f:0000\n\tsys_image_guid:\t\t\t0000:0000:0000:0000\n\tvendor_id:\t\t\t0x626d74\n\tvendor_part_id:\t\t\t0\n\thw_ver:\t\t\t\t0x0\n\tphys_port_cnt:\t\t\t1\n\t\tport:\t1\n\t\t\tstate:\t\t\tPORT_ACTIVE (4)\n\t\t\tmax_mtu:\t\t4096 (5)\n\t\t\tactive_mtu:\t\t4096 (5)\n\t\t\tsm_lid:\t\t\t0\n\t\t\tport_lid:\t\t0\n\t\t\tport_lmc:\t\t0x00\n\t\t\tlink_layer:\t\tEthernet\n\nhca_id:\tsiw_docker0\n\ttransport:\t\t\tiWARP (1)\n\tfw_ver:\t\t\t\t0.0.0\n\tnode_guid:\t\t\t0242:44a5:225b:0000\n\tsys_image_guid:\t\t\t0242:44a5:225b:0000\n\tvendor_id:\t\t\t0x626d74\n\tvendor_part_id:\t\t\t0\n\thw_ver:\t\t\t\t0x0\n\tphys_port_cnt:\t\t\t1\n\t\tport:\t1\n\t\t\tstate:\t\t\tPORT_ACTIVE (4)\n\t\t\tmax_mtu:\t\t1024 (3)\n\t\t\tactive_mtu:\t\t1024 (3)\n\t\t\tsm_lid:\t\t\t0\n\t\t\tport_lid:\t\t0\n\t\t\tport_lmc:\t\t0x00\n\t\t\tlink_layer:\t\tEthernet\n```\n\n\n\n","source":"_posts/Use-RDMA-Emulation-in-Software-Using-SoftiWARP.md","raw":"---\ntitle: Use RDMA Emulation in Software Using SoftiWARP\n---\n##### 环境\n```\nlsb_release -d\nUbuntu 16.04.2 LTS\nuname -sr\nLinux 4.8.13 \n```\n`适用于4.8.x版本内核`\n\n##### 安装依赖\n```\nsudo apt-get install libncurses5 libncurses5-dev libelf-dev binutils-dev  \nsudo apt-get install libibcm-dev libibcm1 \nsudo apt-get install libnl-3-dev  \nwget https://www.openfabrics.org/downloads/verbs/ libibverbs-1.2.1.tar.gz  \ntar zxvf libibverbs-1.2.1.tar.gz  \ncd libibverbs-1.2.1   \n./configure  \nmake\nsudo make install\n```\n\n##### 添加规则文件\n###### /etc/udev/rules.d/40-ib.rules  \n```\n####  /etc/udev/rules.d/40-ib.rules ####  \nKERNEL==\"umad*\", NAME=\"infiniband/%k\"\nKERNEL==\"issm*\", NAME=\"infiniband/%k\"\nKERNEL==\"ucm*\", NAME=\"infiniband/%k\", MODE=\"0666\"\nKERNEL==\"uverbs*\", NAME=\"infiniband/%k\", MODE=\"0666\"\nKERNEL==\"uat\", NAME=\"infiniband/%k\", MODE=\"0666\"\nKERNEL==\"ucma\", NAME=\"infiniband/%k\", MODE=\"0666\"\nKERNEL==\"rdma_cm\", NAME=\"infiniband/%k\", MODE=\"0666\"\n```\n\n##### 下载源码\n###### SoftiWARP\n```\ngit clone https://github.com/zrlio/softiwarp.git\n```\n\n##### 编译并安装用户库\n```\ncd softiwarp/userlib/  \n./autogen.sh  \n./configure \nmake \nsudo make install  \nln -s /usr/local/etc/libibverbs.d /etc/libibverbs.d\n```\n\n##### 编译内核模块  \n```\ncd softiwarp/kernel/  \nmake  \n```\n\n##### 载入内核模块\n```\nsudo modprobe rdma_cm  \nsudo modprobe ib_uverbs  \nsudo modprobe rdma_ucm  \nsudo mkdir /lib/modules/4.8.x/extra  \nsudo cp siw.ko /lib/modules/4.8.x/extra  \nsudo insmod /lib/modules/4.8.x/extra/siw.ko  \ndepmod  \ncp ./userlib/src/.libs/libsiw-rdmav2.so /lib/x86_64-linux-gnu/  \nsudo ldconfig  \nsudo modprobe siw\n```\n\n##### 查看模块\n```\nlsmod | grep rdma\n```\n显示如下\n\n```\nrdma_ucm               28672  0\nib_uverbs              65536  1 rdma_ucm\nrdma_cm                53248  1 rdma_ucm\niw_cm                  45056  1 rdma_cm\nib_cm                  45056  1 rdma_cm\nib_core               204800  6 ib_cm,rdma_cm,ib_uverbs,iw_cm,rdma_ucm,siw\nconfigfs               36864  2 rdma_cm\n```\n\n##### 查看RDMA设备相关信息\n###### userspace verbs模块\n```\nls /dev/infiniband/  \n```\n显示如下\n\n```\nrdma_cm  uverbs0  uverbs1  uverbs2\n```\n\n###### userspace可使用的RDMA设备\n```\nibv_devices  \n```\n显示如下\n\n```\n    device          \t   node GUID\n    ------          \t----------------\n    siw_enp0s25     \t3417eb9bf6d00000\n    siw_lo          \t7369775f6c6f0000\n    siw_docker0     \t024244a5225b0000\n```\n\n###### userspace可使用的RDMA设备的相关信息\n```\nibv_devinfo\n```\n显示如下\n\n```\nhca_id:\tsiw_enp0s25\n\ttransport:\t\t\tiWARP (1)\n\tfw_ver:\t\t\t\t0.0.0\n\tnode_guid:\t\t\t3417:eb9b:f6d0:0000\n\tsys_image_guid:\t\t\t3417:eb9b:f6d0:0000\n\tvendor_id:\t\t\t0x626d74\n\tvendor_part_id:\t\t\t0\n\thw_ver:\t\t\t\t0x0\n\tphys_port_cnt:\t\t\t1\n\t\tport:\t1\n\t\t\tstate:\t\t\tPORT_ACTIVE (4)\n\t\t\tmax_mtu:\t\t1024 (3)\n\t\t\tactive_mtu:\t\t1024 (3)\n\t\t\tsm_lid:\t\t\t0\n\t\t\tport_lid:\t\t0\n\t\t\tport_lmc:\t\t0x00\n\t\t\tlink_layer:\t\tEthernet\n\nhca_id:\tsiw_lo\n\ttransport:\t\t\tiWARP (1)\n\tfw_ver:\t\t\t\t0.0.0\n\tnode_guid:\t\t\t7369:775f:6c6f:0000\n\tsys_image_guid:\t\t\t0000:0000:0000:0000\n\tvendor_id:\t\t\t0x626d74\n\tvendor_part_id:\t\t\t0\n\thw_ver:\t\t\t\t0x0\n\tphys_port_cnt:\t\t\t1\n\t\tport:\t1\n\t\t\tstate:\t\t\tPORT_ACTIVE (4)\n\t\t\tmax_mtu:\t\t4096 (5)\n\t\t\tactive_mtu:\t\t4096 (5)\n\t\t\tsm_lid:\t\t\t0\n\t\t\tport_lid:\t\t0\n\t\t\tport_lmc:\t\t0x00\n\t\t\tlink_layer:\t\tEthernet\n\nhca_id:\tsiw_docker0\n\ttransport:\t\t\tiWARP (1)\n\tfw_ver:\t\t\t\t0.0.0\n\tnode_guid:\t\t\t0242:44a5:225b:0000\n\tsys_image_guid:\t\t\t0242:44a5:225b:0000\n\tvendor_id:\t\t\t0x626d74\n\tvendor_part_id:\t\t\t0\n\thw_ver:\t\t\t\t0x0\n\tphys_port_cnt:\t\t\t1\n\t\tport:\t1\n\t\t\tstate:\t\t\tPORT_ACTIVE (4)\n\t\t\tmax_mtu:\t\t1024 (3)\n\t\t\tactive_mtu:\t\t1024 (3)\n\t\t\tsm_lid:\t\t\t0\n\t\t\tport_lid:\t\t0\n\t\t\tport_lmc:\t\t0x00\n\t\t\tlink_layer:\t\tEthernet\n```\n\n\n\n","slug":"Use-RDMA-Emulation-in-Software-Using-SoftiWARP","published":1,"date":"2017-12-14T03:15:52.000Z","updated":"2017-12-14T03:15:52.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjb5xxdgu0002her9bqfnli5t","content":"<h5 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">lsb_release -d</div><div class=\"line\">Ubuntu 16.04.2 LTS</div><div class=\"line\">uname -sr</div><div class=\"line\">Linux 4.8.13</div></pre></td></tr></table></figure>\n<p><code>适用于4.8.x版本内核</code></p>\n<h5 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get install libncurses5 libncurses5-dev libelf-dev binutils-dev  </div><div class=\"line\">sudo apt-get install libibcm-dev libibcm1 </div><div class=\"line\">sudo apt-get install libnl-3-dev  </div><div class=\"line\">wget https://www.openfabrics.org/downloads/verbs/ libibverbs-1.2.1.tar.gz  </div><div class=\"line\">tar zxvf libibverbs-1.2.1.tar.gz  </div><div class=\"line\">cd libibverbs-1.2.1   </div><div class=\"line\">./configure  </div><div class=\"line\">make</div><div class=\"line\">sudo make install</div></pre></td></tr></table></figure>\n<h5 id=\"添加规则文件\"><a href=\"#添加规则文件\" class=\"headerlink\" title=\"添加规则文件\"></a>添加规则文件</h5><h6 id=\"etc-udev-rules-d-40-ib-rules\"><a href=\"#etc-udev-rules-d-40-ib-rules\" class=\"headerlink\" title=\"/etc/udev/rules.d/40-ib.rules\"></a>/etc/udev/rules.d/40-ib.rules</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">####  /etc/udev/rules.d/40-ib.rules ####  </div><div class=\"line\">KERNEL==&quot;umad*&quot;, NAME=&quot;infiniband/%k&quot;</div><div class=\"line\">KERNEL==&quot;issm*&quot;, NAME=&quot;infiniband/%k&quot;</div><div class=\"line\">KERNEL==&quot;ucm*&quot;, NAME=&quot;infiniband/%k&quot;, MODE=&quot;0666&quot;</div><div class=\"line\">KERNEL==&quot;uverbs*&quot;, NAME=&quot;infiniband/%k&quot;, MODE=&quot;0666&quot;</div><div class=\"line\">KERNEL==&quot;uat&quot;, NAME=&quot;infiniband/%k&quot;, MODE=&quot;0666&quot;</div><div class=\"line\">KERNEL==&quot;ucma&quot;, NAME=&quot;infiniband/%k&quot;, MODE=&quot;0666&quot;</div><div class=\"line\">KERNEL==&quot;rdma_cm&quot;, NAME=&quot;infiniband/%k&quot;, MODE=&quot;0666&quot;</div></pre></td></tr></table></figure>\n<h5 id=\"下载源码\"><a href=\"#下载源码\" class=\"headerlink\" title=\"下载源码\"></a>下载源码</h5><h6 id=\"SoftiWARP\"><a href=\"#SoftiWARP\" class=\"headerlink\" title=\"SoftiWARP\"></a>SoftiWARP</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git clone https://github.com/zrlio/softiwarp.git</div></pre></td></tr></table></figure>\n<h5 id=\"编译并安装用户库\"><a href=\"#编译并安装用户库\" class=\"headerlink\" title=\"编译并安装用户库\"></a>编译并安装用户库</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd softiwarp/userlib/  </div><div class=\"line\">./autogen.sh  </div><div class=\"line\">./configure </div><div class=\"line\">make </div><div class=\"line\">sudo make install  </div><div class=\"line\">ln -s /usr/local/etc/libibverbs.d /etc/libibverbs.d</div></pre></td></tr></table></figure>\n<h5 id=\"编译内核模块\"><a href=\"#编译内核模块\" class=\"headerlink\" title=\"编译内核模块\"></a>编译内核模块</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd softiwarp/kernel/  </div><div class=\"line\">make</div></pre></td></tr></table></figure>\n<h5 id=\"载入内核模块\"><a href=\"#载入内核模块\" class=\"headerlink\" title=\"载入内核模块\"></a>载入内核模块</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo modprobe rdma_cm  </div><div class=\"line\">sudo modprobe ib_uverbs  </div><div class=\"line\">sudo modprobe rdma_ucm  </div><div class=\"line\">sudo mkdir /lib/modules/4.8.x/extra  </div><div class=\"line\">sudo cp siw.ko /lib/modules/4.8.x/extra  </div><div class=\"line\">sudo insmod /lib/modules/4.8.x/extra/siw.ko  </div><div class=\"line\">depmod  </div><div class=\"line\">cp ./userlib/src/.libs/libsiw-rdmav2.so /lib/x86_64-linux-gnu/  </div><div class=\"line\">sudo ldconfig  </div><div class=\"line\">sudo modprobe siw</div></pre></td></tr></table></figure>\n<h5 id=\"查看模块\"><a href=\"#查看模块\" class=\"headerlink\" title=\"查看模块\"></a>查看模块</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">lsmod | grep rdma</div></pre></td></tr></table></figure>\n<p>显示如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">rdma_ucm               28672  0</div><div class=\"line\">ib_uverbs              65536  1 rdma_ucm</div><div class=\"line\">rdma_cm                53248  1 rdma_ucm</div><div class=\"line\">iw_cm                  45056  1 rdma_cm</div><div class=\"line\">ib_cm                  45056  1 rdma_cm</div><div class=\"line\">ib_core               204800  6 ib_cm,rdma_cm,ib_uverbs,iw_cm,rdma_ucm,siw</div><div class=\"line\">configfs               36864  2 rdma_cm</div></pre></td></tr></table></figure>\n<h5 id=\"查看RDMA设备相关信息\"><a href=\"#查看RDMA设备相关信息\" class=\"headerlink\" title=\"查看RDMA设备相关信息\"></a>查看RDMA设备相关信息</h5><h6 id=\"userspace-verbs模块\"><a href=\"#userspace-verbs模块\" class=\"headerlink\" title=\"userspace verbs模块\"></a>userspace verbs模块</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ls /dev/infiniband/</div></pre></td></tr></table></figure>\n<p>显示如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">rdma_cm  uverbs0  uverbs1  uverbs2</div></pre></td></tr></table></figure>\n<h6 id=\"userspace可使用的RDMA设备\"><a href=\"#userspace可使用的RDMA设备\" class=\"headerlink\" title=\"userspace可使用的RDMA设备\"></a>userspace可使用的RDMA设备</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ibv_devices</div></pre></td></tr></table></figure>\n<p>显示如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">device          \t   node GUID</div><div class=\"line\">------          \t----------------</div><div class=\"line\">siw_enp0s25     \t3417eb9bf6d00000</div><div class=\"line\">siw_lo          \t7369775f6c6f0000</div><div class=\"line\">siw_docker0     \t024244a5225b0000</div></pre></td></tr></table></figure>\n<h6 id=\"userspace可使用的RDMA设备的相关信息\"><a href=\"#userspace可使用的RDMA设备的相关信息\" class=\"headerlink\" title=\"userspace可使用的RDMA设备的相关信息\"></a>userspace可使用的RDMA设备的相关信息</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ibv_devinfo</div></pre></td></tr></table></figure>\n<p>显示如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\">hca_id:\tsiw_enp0s25</div><div class=\"line\">\ttransport:\t\t\tiWARP (1)</div><div class=\"line\">\tfw_ver:\t\t\t\t0.0.0</div><div class=\"line\">\tnode_guid:\t\t\t3417:eb9b:f6d0:0000</div><div class=\"line\">\tsys_image_guid:\t\t\t3417:eb9b:f6d0:0000</div><div class=\"line\">\tvendor_id:\t\t\t0x626d74</div><div class=\"line\">\tvendor_part_id:\t\t\t0</div><div class=\"line\">\thw_ver:\t\t\t\t0x0</div><div class=\"line\">\tphys_port_cnt:\t\t\t1</div><div class=\"line\">\t\tport:\t1</div><div class=\"line\">\t\t\tstate:\t\t\tPORT_ACTIVE (4)</div><div class=\"line\">\t\t\tmax_mtu:\t\t1024 (3)</div><div class=\"line\">\t\t\tactive_mtu:\t\t1024 (3)</div><div class=\"line\">\t\t\tsm_lid:\t\t\t0</div><div class=\"line\">\t\t\tport_lid:\t\t0</div><div class=\"line\">\t\t\tport_lmc:\t\t0x00</div><div class=\"line\">\t\t\tlink_layer:\t\tEthernet</div><div class=\"line\"></div><div class=\"line\">hca_id:\tsiw_lo</div><div class=\"line\">\ttransport:\t\t\tiWARP (1)</div><div class=\"line\">\tfw_ver:\t\t\t\t0.0.0</div><div class=\"line\">\tnode_guid:\t\t\t7369:775f:6c6f:0000</div><div class=\"line\">\tsys_image_guid:\t\t\t0000:0000:0000:0000</div><div class=\"line\">\tvendor_id:\t\t\t0x626d74</div><div class=\"line\">\tvendor_part_id:\t\t\t0</div><div class=\"line\">\thw_ver:\t\t\t\t0x0</div><div class=\"line\">\tphys_port_cnt:\t\t\t1</div><div class=\"line\">\t\tport:\t1</div><div class=\"line\">\t\t\tstate:\t\t\tPORT_ACTIVE (4)</div><div class=\"line\">\t\t\tmax_mtu:\t\t4096 (5)</div><div class=\"line\">\t\t\tactive_mtu:\t\t4096 (5)</div><div class=\"line\">\t\t\tsm_lid:\t\t\t0</div><div class=\"line\">\t\t\tport_lid:\t\t0</div><div class=\"line\">\t\t\tport_lmc:\t\t0x00</div><div class=\"line\">\t\t\tlink_layer:\t\tEthernet</div><div class=\"line\"></div><div class=\"line\">hca_id:\tsiw_docker0</div><div class=\"line\">\ttransport:\t\t\tiWARP (1)</div><div class=\"line\">\tfw_ver:\t\t\t\t0.0.0</div><div class=\"line\">\tnode_guid:\t\t\t0242:44a5:225b:0000</div><div class=\"line\">\tsys_image_guid:\t\t\t0242:44a5:225b:0000</div><div class=\"line\">\tvendor_id:\t\t\t0x626d74</div><div class=\"line\">\tvendor_part_id:\t\t\t0</div><div class=\"line\">\thw_ver:\t\t\t\t0x0</div><div class=\"line\">\tphys_port_cnt:\t\t\t1</div><div class=\"line\">\t\tport:\t1</div><div class=\"line\">\t\t\tstate:\t\t\tPORT_ACTIVE (4)</div><div class=\"line\">\t\t\tmax_mtu:\t\t1024 (3)</div><div class=\"line\">\t\t\tactive_mtu:\t\t1024 (3)</div><div class=\"line\">\t\t\tsm_lid:\t\t\t0</div><div class=\"line\">\t\t\tport_lid:\t\t0</div><div class=\"line\">\t\t\tport_lmc:\t\t0x00</div><div class=\"line\">\t\t\tlink_layer:\t\tEthernet</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h5 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">lsb_release -d</div><div class=\"line\">Ubuntu 16.04.2 LTS</div><div class=\"line\">uname -sr</div><div class=\"line\">Linux 4.8.13</div></pre></td></tr></table></figure>\n<p><code>适用于4.8.x版本内核</code></p>\n<h5 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get install libncurses5 libncurses5-dev libelf-dev binutils-dev  </div><div class=\"line\">sudo apt-get install libibcm-dev libibcm1 </div><div class=\"line\">sudo apt-get install libnl-3-dev  </div><div class=\"line\">wget https://www.openfabrics.org/downloads/verbs/ libibverbs-1.2.1.tar.gz  </div><div class=\"line\">tar zxvf libibverbs-1.2.1.tar.gz  </div><div class=\"line\">cd libibverbs-1.2.1   </div><div class=\"line\">./configure  </div><div class=\"line\">make</div><div class=\"line\">sudo make install</div></pre></td></tr></table></figure>\n<h5 id=\"添加规则文件\"><a href=\"#添加规则文件\" class=\"headerlink\" title=\"添加规则文件\"></a>添加规则文件</h5><h6 id=\"etc-udev-rules-d-40-ib-rules\"><a href=\"#etc-udev-rules-d-40-ib-rules\" class=\"headerlink\" title=\"/etc/udev/rules.d/40-ib.rules\"></a>/etc/udev/rules.d/40-ib.rules</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">####  /etc/udev/rules.d/40-ib.rules ####  </div><div class=\"line\">KERNEL==&quot;umad*&quot;, NAME=&quot;infiniband/%k&quot;</div><div class=\"line\">KERNEL==&quot;issm*&quot;, NAME=&quot;infiniband/%k&quot;</div><div class=\"line\">KERNEL==&quot;ucm*&quot;, NAME=&quot;infiniband/%k&quot;, MODE=&quot;0666&quot;</div><div class=\"line\">KERNEL==&quot;uverbs*&quot;, NAME=&quot;infiniband/%k&quot;, MODE=&quot;0666&quot;</div><div class=\"line\">KERNEL==&quot;uat&quot;, NAME=&quot;infiniband/%k&quot;, MODE=&quot;0666&quot;</div><div class=\"line\">KERNEL==&quot;ucma&quot;, NAME=&quot;infiniband/%k&quot;, MODE=&quot;0666&quot;</div><div class=\"line\">KERNEL==&quot;rdma_cm&quot;, NAME=&quot;infiniband/%k&quot;, MODE=&quot;0666&quot;</div></pre></td></tr></table></figure>\n<h5 id=\"下载源码\"><a href=\"#下载源码\" class=\"headerlink\" title=\"下载源码\"></a>下载源码</h5><h6 id=\"SoftiWARP\"><a href=\"#SoftiWARP\" class=\"headerlink\" title=\"SoftiWARP\"></a>SoftiWARP</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git clone https://github.com/zrlio/softiwarp.git</div></pre></td></tr></table></figure>\n<h5 id=\"编译并安装用户库\"><a href=\"#编译并安装用户库\" class=\"headerlink\" title=\"编译并安装用户库\"></a>编译并安装用户库</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd softiwarp/userlib/  </div><div class=\"line\">./autogen.sh  </div><div class=\"line\">./configure </div><div class=\"line\">make </div><div class=\"line\">sudo make install  </div><div class=\"line\">ln -s /usr/local/etc/libibverbs.d /etc/libibverbs.d</div></pre></td></tr></table></figure>\n<h5 id=\"编译内核模块\"><a href=\"#编译内核模块\" class=\"headerlink\" title=\"编译内核模块\"></a>编译内核模块</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd softiwarp/kernel/  </div><div class=\"line\">make</div></pre></td></tr></table></figure>\n<h5 id=\"载入内核模块\"><a href=\"#载入内核模块\" class=\"headerlink\" title=\"载入内核模块\"></a>载入内核模块</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo modprobe rdma_cm  </div><div class=\"line\">sudo modprobe ib_uverbs  </div><div class=\"line\">sudo modprobe rdma_ucm  </div><div class=\"line\">sudo mkdir /lib/modules/4.8.x/extra  </div><div class=\"line\">sudo cp siw.ko /lib/modules/4.8.x/extra  </div><div class=\"line\">sudo insmod /lib/modules/4.8.x/extra/siw.ko  </div><div class=\"line\">depmod  </div><div class=\"line\">cp ./userlib/src/.libs/libsiw-rdmav2.so /lib/x86_64-linux-gnu/  </div><div class=\"line\">sudo ldconfig  </div><div class=\"line\">sudo modprobe siw</div></pre></td></tr></table></figure>\n<h5 id=\"查看模块\"><a href=\"#查看模块\" class=\"headerlink\" title=\"查看模块\"></a>查看模块</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">lsmod | grep rdma</div></pre></td></tr></table></figure>\n<p>显示如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">rdma_ucm               28672  0</div><div class=\"line\">ib_uverbs              65536  1 rdma_ucm</div><div class=\"line\">rdma_cm                53248  1 rdma_ucm</div><div class=\"line\">iw_cm                  45056  1 rdma_cm</div><div class=\"line\">ib_cm                  45056  1 rdma_cm</div><div class=\"line\">ib_core               204800  6 ib_cm,rdma_cm,ib_uverbs,iw_cm,rdma_ucm,siw</div><div class=\"line\">configfs               36864  2 rdma_cm</div></pre></td></tr></table></figure>\n<h5 id=\"查看RDMA设备相关信息\"><a href=\"#查看RDMA设备相关信息\" class=\"headerlink\" title=\"查看RDMA设备相关信息\"></a>查看RDMA设备相关信息</h5><h6 id=\"userspace-verbs模块\"><a href=\"#userspace-verbs模块\" class=\"headerlink\" title=\"userspace verbs模块\"></a>userspace verbs模块</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ls /dev/infiniband/</div></pre></td></tr></table></figure>\n<p>显示如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">rdma_cm  uverbs0  uverbs1  uverbs2</div></pre></td></tr></table></figure>\n<h6 id=\"userspace可使用的RDMA设备\"><a href=\"#userspace可使用的RDMA设备\" class=\"headerlink\" title=\"userspace可使用的RDMA设备\"></a>userspace可使用的RDMA设备</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ibv_devices</div></pre></td></tr></table></figure>\n<p>显示如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">device          \t   node GUID</div><div class=\"line\">------          \t----------------</div><div class=\"line\">siw_enp0s25     \t3417eb9bf6d00000</div><div class=\"line\">siw_lo          \t7369775f6c6f0000</div><div class=\"line\">siw_docker0     \t024244a5225b0000</div></pre></td></tr></table></figure>\n<h6 id=\"userspace可使用的RDMA设备的相关信息\"><a href=\"#userspace可使用的RDMA设备的相关信息\" class=\"headerlink\" title=\"userspace可使用的RDMA设备的相关信息\"></a>userspace可使用的RDMA设备的相关信息</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ibv_devinfo</div></pre></td></tr></table></figure>\n<p>显示如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\">hca_id:\tsiw_enp0s25</div><div class=\"line\">\ttransport:\t\t\tiWARP (1)</div><div class=\"line\">\tfw_ver:\t\t\t\t0.0.0</div><div class=\"line\">\tnode_guid:\t\t\t3417:eb9b:f6d0:0000</div><div class=\"line\">\tsys_image_guid:\t\t\t3417:eb9b:f6d0:0000</div><div class=\"line\">\tvendor_id:\t\t\t0x626d74</div><div class=\"line\">\tvendor_part_id:\t\t\t0</div><div class=\"line\">\thw_ver:\t\t\t\t0x0</div><div class=\"line\">\tphys_port_cnt:\t\t\t1</div><div class=\"line\">\t\tport:\t1</div><div class=\"line\">\t\t\tstate:\t\t\tPORT_ACTIVE (4)</div><div class=\"line\">\t\t\tmax_mtu:\t\t1024 (3)</div><div class=\"line\">\t\t\tactive_mtu:\t\t1024 (3)</div><div class=\"line\">\t\t\tsm_lid:\t\t\t0</div><div class=\"line\">\t\t\tport_lid:\t\t0</div><div class=\"line\">\t\t\tport_lmc:\t\t0x00</div><div class=\"line\">\t\t\tlink_layer:\t\tEthernet</div><div class=\"line\"></div><div class=\"line\">hca_id:\tsiw_lo</div><div class=\"line\">\ttransport:\t\t\tiWARP (1)</div><div class=\"line\">\tfw_ver:\t\t\t\t0.0.0</div><div class=\"line\">\tnode_guid:\t\t\t7369:775f:6c6f:0000</div><div class=\"line\">\tsys_image_guid:\t\t\t0000:0000:0000:0000</div><div class=\"line\">\tvendor_id:\t\t\t0x626d74</div><div class=\"line\">\tvendor_part_id:\t\t\t0</div><div class=\"line\">\thw_ver:\t\t\t\t0x0</div><div class=\"line\">\tphys_port_cnt:\t\t\t1</div><div class=\"line\">\t\tport:\t1</div><div class=\"line\">\t\t\tstate:\t\t\tPORT_ACTIVE (4)</div><div class=\"line\">\t\t\tmax_mtu:\t\t4096 (5)</div><div class=\"line\">\t\t\tactive_mtu:\t\t4096 (5)</div><div class=\"line\">\t\t\tsm_lid:\t\t\t0</div><div class=\"line\">\t\t\tport_lid:\t\t0</div><div class=\"line\">\t\t\tport_lmc:\t\t0x00</div><div class=\"line\">\t\t\tlink_layer:\t\tEthernet</div><div class=\"line\"></div><div class=\"line\">hca_id:\tsiw_docker0</div><div class=\"line\">\ttransport:\t\t\tiWARP (1)</div><div class=\"line\">\tfw_ver:\t\t\t\t0.0.0</div><div class=\"line\">\tnode_guid:\t\t\t0242:44a5:225b:0000</div><div class=\"line\">\tsys_image_guid:\t\t\t0242:44a5:225b:0000</div><div class=\"line\">\tvendor_id:\t\t\t0x626d74</div><div class=\"line\">\tvendor_part_id:\t\t\t0</div><div class=\"line\">\thw_ver:\t\t\t\t0x0</div><div class=\"line\">\tphys_port_cnt:\t\t\t1</div><div class=\"line\">\t\tport:\t1</div><div class=\"line\">\t\t\tstate:\t\t\tPORT_ACTIVE (4)</div><div class=\"line\">\t\t\tmax_mtu:\t\t1024 (3)</div><div class=\"line\">\t\t\tactive_mtu:\t\t1024 (3)</div><div class=\"line\">\t\t\tsm_lid:\t\t\t0</div><div class=\"line\">\t\t\tport_lid:\t\t0</div><div class=\"line\">\t\t\tport_lmc:\t\t0x00</div><div class=\"line\">\t\t\tlink_layer:\t\tEthernet</div></pre></td></tr></table></figure>\n"},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2017-12-14T03:06:21.000Z","updated":"2017-12-14T03:06:21.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjb5xxdgx0003her9mq3ee75j","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo server</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo generate</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo deploy</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo server</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo generate</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo deploy</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}